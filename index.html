<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>一直在想你</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
  <style>
    :root {
      --color-main: #4A0A8A;
      --color-main-grad: #6A0DAD;
      --color-deep-purple: #2D0047;
      --color-dark-blue: #0A0028;
      --color-cyan: #00ffff;
      --color-white: #ffffff;
      --color-pink: #f584b7;
      --color-shadow1: #00ffff;
      --color-shadow2: #6a0dad;
    }
    html, body {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      min-height: 100vh;
      min-width: 100vw;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: linear-gradient(135deg, var(--color-dark-blue) 0%, var(--color-deep-purple) 40%, var(--color-main) 80%, var(--color-main-grad) 100%);
      font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "STKaiti", "Segoe UI", Arial, cursive, sans-serif;
      color: var(--color-white);
    }
    body {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      overscroll-behavior: none;
    }
    #bgCanvas, #particleCanvas {
      position: fixed;
      left: 0; top: 0; z-index: 0;
      width: 100vw !important;
      height: 100vh !important;
      display: block;
    }
    
    /* 深邃星空背景 */
    .stars-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: 
        radial-gradient(2px 2px at 20px 30px, #eee, transparent),
        radial-gradient(2px 2px at 40px 70px, #fff, transparent),
        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
        radial-gradient(1px 1px at 130px 80px, #fff, transparent),
        radial-gradient(2px 2px at 160px 30px, #ddd, transparent);
      background-repeat: repeat;
      background-size: 200px 100px;
      opacity: 0.3;
      animation: twinkle 4s infinite alternate;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 0.4; }
    }
    
    .main-content {
      position: absolute;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      width: 75%; /* 占据75%宽度 */
      max-width: 1000px;
      z-index: 3;
      text-align: center;
      user-select: none;
      pointer-events: none;
    }
    .love-saying {
      font-size: 3.2em;
      font-weight: bold;
      color: var(--color-pink);
      letter-spacing: .16em;
      padding-bottom: .15em;
      text-shadow:
        0 0 24px var(--color-shadow1),
        0 0 22px var(--color-shadow2),
        1px 2px 1px #0003;
      animation: romancePulse 2.8s infinite cubic-bezier(.77,0,.17,1);
      background: linear-gradient(90deg, var(--color-main) 10%, var(--color-cyan) 85%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1.5em;
    }
    @keyframes romancePulse {
      0% { transform:translateY(0) scale(1);}
      45%{ transform:translateY(-12px) scale(1.12);}
      100%{transform:translateY(0) scale(1);}
    }
    
    /* 优化后的倒计时样式 - 大字体简洁大气 */
    .love-time {
      font-size: 2.8em;
      color: var(--color-white);
      text-shadow: 
        0 0 20px var(--color-cyan),
        0 0 40px var(--color-shadow1);
      padding: 1.2em 0.8em;
      letter-spacing: .08em;
      border-radius: 25px;
      background: rgba(20, 0, 40, 0.6);
      box-shadow: 
        0 0 30px 4px rgba(0, 255, 255, 0.2) inset,
        0 0 30px 2px rgba(106, 13, 173, 0.3);
      mix-blend-mode: normal;
      transition: all .3s;
      animation: floatText 4.8s ease-in-out infinite alternate;
      display: block;
      position: relative;
      overflow: hidden;
      font-weight: 600;
      line-height: 1.4;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.15);
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 2em;
    }
    
    /* 简洁的流光效果 */
    .love-time::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.15), 
        transparent);
      transition: left 0.7s;
      z-index: -1;
    }
    
    .love-time:hover::before {
      left: 100%;
    }
    
    @keyframes floatText {
      0%   { transform:translateY(0);}
      40%  { transform:translateY(-8px);}
      100% { transform:translateY(0);}
    }

    /* 跳动的心样式 */
    .heart-container {
      position: relative;
      width: 100%;
      height: 120px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 1em;
    }
    
    .heart {
      position: absolute;
      width: 100px;
      height: 90px;
      animation: heartbeat 1.2s infinite ease-in-out;
      filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.8));
      z-index: 2;
    }
    
    .heart:before,
    .heart:after {
      content: "";
      position: absolute;
      left: 50px;
      top: 0;
      width: 50px;
      height: 80px;
      background: #ff4d6d;
      border-radius: 50px 50px 0 0;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }
    
    .heart:after {
      left: 0;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }
    
    @keyframes heartbeat {
      0% {
        transform: scale(1);
      }
      5% {
        transform: scale(1.1);
      }
      10% {
        transform: scale(1.15);
      }
      15% {
        transform: scale(1.2);
      }
      50% {
        transform: scale(1);
      }
      100% {
        transform: scale(1);
      }
    }
    
    /* 心跳光晕效果 */
    .heart-pulse {
      position: absolute;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: rgba(255, 105, 180, 0.25);
      animation: pulse 1.2s infinite;
      z-index: 1;
    }
    
    @keyframes pulse {
      0% {
        transform: scale(0.8);
        opacity: 0.7;
      }
      50% {
        transform: scale(1.2);
        opacity: 0.3;
      }
      100% {
        transform: scale(1.4);
        opacity: 0;
      }
    }

    /* 全屏爱心特效 */
    .fullscreen-heart {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 100;
      opacity: 0;
      transition: opacity 0.5s;
    }
    
    .fullscreen-heart.active {
      opacity: 1;
    }
    
    .fullscreen-heart .heart-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(255, 105, 180, 0.7) 0%, rgba(106, 13, 173, 0.8) 100%);
      animation: heartBgPulse 2s ease-out forwards;
    }
    
    @keyframes heartBgPulse {
      0% {
        transform: scale(0);
        opacity: 0;
      }
      20% {
        transform: scale(1);
        opacity: 1;
      }
      80% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(1.2);
        opacity: 0;
      }
    }
    
    .fullscreen-heart .heart-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 8em;
      color: white;
      text-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
      animation: heartTextPulse 2s ease-out forwards;
      z-index: 101;
    }
    
    @keyframes heartTextPulse {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      30% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 1;
      }
      50% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      70% {
        transform: translate(-50%, -50%) scale(1.1);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0;
      }
    }

    /* 平板端优化 */
    @media (max-width: 1024px) {
      .main-content {
        width: 85%;
      }
      .love-saying {
        font-size: 2.8em;
      }
      .love-time {
        font-size: 2.4em;
        padding: 1em 0.6em;
      }
      .heart {
        width: 90px;
        height: 81px;
      }
      .heart:before,
      .heart:after {
        width: 45px;
        height: 72px;
      }
      .heart:before {
        left: 45px;
      }
      .fullscreen-heart .heart-overlay {
        font-size: 6em;
      }
    }

    /* 手机端特殊优化 */
    @media (max-width: 768px) {
      .main-content {
        width: 90%;
        transform: translate(-50%, -50%);
      }
      .love-saying {
        font-size: 2.2em;
        margin-bottom: 1em;
      }
      .love-time {
        font-size: 1.8em;
        padding: 0.8em 0.5em;
        line-height: 1.3;
        margin-bottom: 1.5em;
      }
      .heart-container {
        height: 100px;
        margin-top: 0.5em;
      }
      .heart {
        width: 80px;
        height: 72px;
      }
      .heart:before,
      .heart:after {
        width: 40px;
        height: 64px;
      }
      .heart:before {
        left: 40px;
      }
      .heart-pulse {
        width: 100px;
        height: 100px;
      }
      .fullscreen-heart .heart-overlay {
        font-size: 4em;
      }
    }

    @media (max-width: 480px) {
      .main-content {
        width: 92%;
      }
      .love-saying {
        font-size: 1.8em;
        letter-spacing: .1em;
      }
      .love-time {
        font-size: 1.5em;
        padding: 0.7em 0.4em;
        letter-spacing: .05em;
        margin-bottom: 1em;
      }
      .heart-container {
        height: 80px;
      }
      .heart {
        width: 60px;
        height: 54px;
      }
      .heart:before,
      .heart:after {
        width: 30px;
        height: 48px;
      }
      .heart:before {
        left: 30px;
      }
      .heart-pulse {
        width: 80px;
        height: 80px;
      }
      .fullscreen-heart .heart-overlay {
        font-size: 3em;
      }
    }

    @media (max-width: 360px) {
      .love-saying {
        font-size: 1.6em;
      }
      .love-time {
        font-size: 1.3em;
        padding: 0.6em 0.3em;
      }
      .heart-container {
        height: 70px;
      }
      .heart {
        width: 50px;
        height: 45px;
      }
      .heart:before,
      .heart:after {
        width: 25px;
        height: 40px;
      }
      .heart:before {
        left: 25px;
      }
      .heart-pulse {
        width: 70px;
        height: 70px;
      }
      .fullscreen-heart .heart-overlay {
        font-size: 2.5em;
      }
    }

    /* 烟花/粒子爆破点击反馈样式 */
    .touch-tip {
      position: fixed;
      left: 50%; top: 50%;
      transform: translate(-50%,-50%);
      font-size:1.3em;
      padding: 0.6em 1.8em;
      background: rgba(124,0,180,0.15);
      color: var(--color-cyan);
      border-radius:99em;
      z-index:30;
      pointer-events:none;
      opacity:0;transition: .5s;
    }
    .touch-tip.show { opacity:1; }

    /* 隐藏滚动条 */
    ::-webkit-scrollbar {display:none;}
    audio { display: none !important; }
  </style>
</head>
<body>
  <!-- 深邃星空背景 -->
  <div class="stars-background"></div>
  
  <!-- 背景Canvas：流动光晕、渐变 -->
  <canvas id="bgCanvas"></canvas>
  <!-- 粒子爱心与浪漫互动特效层 -->
  <canvas id="particleCanvas"></canvas>

  <!-- 全屏爱心特效 -->
  <div class="fullscreen-heart" id="fullscreenHeart">
    <div class="heart-bg"></div>
    <div class="heart-overlay">💖</div>
  </div>

  <!-- 内容区域 -->
  <div class="main-content">
    <div class="love-saying">一直在想你</div>
    <div class="love-time" id="loveTime">想你时长加载中...</div>
    <div class="heart-container">
      <div class="heart-pulse"></div>
      <div class="heart"></div>
    </div>
  </div>
  <div class="touch-tip" id="tip">点一点，有惊喜～</div>

  <script>
    // == 背景梦幻流光渐变 ==
    const bgCanvas = document.getElementById('bgCanvas');
    const bgCtx = bgCanvas.getContext('2d');
    function resizeBgCanvas(){
      bgCanvas.width = window.innerWidth;
      bgCanvas.height = window.innerHeight;
    }
    resizeBgCanvas();
    window.addEventListener('resize', resizeBgCanvas);

    function drawBackground(){
      let w = bgCanvas.width, h = bgCanvas.height;
      
      // 深邃背景渐变
      let gradient = bgCtx.createLinearGradient(0, 0, w, h);
      gradient.addColorStop(0, "#0A0028"); // 深蓝色
      gradient.addColorStop(0.3, "#2D0047"); // 深紫色
      gradient.addColorStop(0.7, "#4A0A8A"); // 紫色
      gradient.addColorStop(1, "#6A0DAD"); // 亮紫色
      
      bgCtx.fillStyle = gradient;
      bgCtx.fillRect(0,0,w,h);
      
      // 更柔和的浮动光斑
      for(let i=1;i<=6;i++){
        let r = Math.abs(Math.sin(Date.now()/4000 + i))*0.3+0.2;
        let gx = w * [0.1,0.9,0.7,0.3,0.8,0.2][i-1];
        let gy = h * [0.2,0.3,0.8,0.6,0.4,0.7][i-1];
        let grad = bgCtx.createRadialGradient(gx,gy,0,gx,gy,r*w/2);
        grad.addColorStop(0,"rgba(180,70,255,0.08)");
        grad.addColorStop(.7,"rgba(106,13,173,0.05)");
        grad.addColorStop(1,"rgba(10,0,40,0)");
        bgCtx.beginPath();
        bgCtx.arc(gx,gy,r*w/2,0,2*Math.PI);
        bgCtx.fillStyle = grad;
        bgCtx.globalAlpha = 0.4;
        bgCtx.fill();
        bgCtx.globalAlpha = 1;
      }
      
      // 添加深邃的星空效果
      for(let i=0;i<150;i++){
        let x = Math.random()*w;
        let y = Math.random()*h;
        let size = Math.random()*1.5;
        let brightness = Math.random()*0.8+0.2;
        
        bgCtx.beginPath();
        bgCtx.arc(x,y,size,0,2*Math.PI);
        bgCtx.fillStyle = `rgba(255,255,255,${brightness*0.15})`;
        bgCtx.fill();
      }
      
      requestAnimationFrame(drawBackground);
    }
    drawBackground();

    // == 粒子爱心/爆破/互动 ==
    const particleCanvas = document.getElementById('particleCanvas');
    const pCtx = particleCanvas.getContext('2d');
    let dpr = window.devicePixelRatio || 1;
    function resizeParticleCanvas() {
      let w = window.innerWidth, h = window.innerHeight;
      particleCanvas.width = w*dpr;
      particleCanvas.height = h*dpr;
      particleCanvas.style.width = w + 'px';
      particleCanvas.style.height = h + 'px';
      pCtx.setTransform(1,0,0,1,0,0); //reset
      pCtx.scale(dpr,dpr);
    }
    resizeParticleCanvas();
    window.addEventListener('resize', resizeParticleCanvas);

    // 爱心形状粒子初始参数
    function heartPos(t){
      // 标准爱心曲线
      let x=16 * Math.pow(Math.sin(t),3);
      let y=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
      return [x,y];
    }
    const HEART_DENS = 100;
    const particles=[];
    for(let i=0;i<HEART_DENS;i++){
      let rad = Math.PI * 2 * i/HEART_DENS;
      let [hx, hy] = heartPos(rad);
      // 样本点分布
      let color = `hsl(${270+35*Math.random()},88%,${54+16*Math.random()}%)`;
      particles.push({
        x: Math.random()*window.innerWidth,
        y: Math.random()*window.innerHeight,
        tx: 0, ty:0,       // 目标点
        color,
        v: Math.random()*1.4+0.5,
        radius: Math.random()*2+1.4,
        trace: [],
        heartIdx: i
      });
    }

    function updateHeartParticles(t_ms){
      let t = ((t_ms||performance.now())/2200)%1;
      let centerX=window.innerWidth/2,
          centerY=window.innerHeight/2 - 45;
      let scale = Math.min(window.innerWidth,window.innerHeight) * .027 + 110;
      // 心跳脉冲
      let pulse = 1 + 0.14*Math.sin(performance.now()/660);
      for(let i=0;i<particles.length;i++){
        let rad = Math.PI * 2 * i / HEART_DENS + t * (Math.PI*2);
        let [hx,hy] = heartPos(rad);
        let tx = centerX + hx * scale * pulse;
        let ty = centerY + hy * scale * pulse;
        // 平滑趋向
        particles[i].x += (tx-particles[i].x)*.09;
        particles[i].y += (ty-particles[i].y)*.09;
        particles[i].tx = tx;
        particles[i].ty = ty;
        particles[i].radius = 1.8 + Math.sin(performance.now()/630 + 7*i);
      }
    }

    // 绘制爱心和浪漫粒子
    function drawParticles() {
      pCtx.clearRect(0,0,window.innerWidth,window.innerHeight);
      // 心形粒子
      updateHeartParticles();
      for(let i=0;i<particles.length;i++){
        let p = particles[i];
        pCtx.beginPath();
        pCtx.arc(p.x, p.y, p.radius, 0, Math.PI*2);
        pCtx.fillStyle = p.color;
        pCtx.shadowColor = p.color;
        pCtx.shadowBlur = 18;
        pCtx.globalAlpha = .72;
        pCtx.fill();
        pCtx.shadowBlur = 0;
        pCtx.globalAlpha = 1;
      }
      // 粒子拖尾效果
      explodingParticles = explodingParticles.filter(e=>!e.dead);
      for(let e of explodingParticles){
        e.update();
        e.draw(pCtx);
      }
      requestAnimationFrame(drawParticles);
    }
    // ==== 爆破粒子（用于点击互动/烟花） ====
    class ExplodeParticle {
      constructor(x, y, angle, speed, color){
        this.x = x; this.y = y;
        this.vx = Math.cos(angle)*speed;
        this.vy = Math.sin(angle)*speed;
        this.color = color;
        this.life = 38 + Math.random()*12;
        this.radius = 2.4+3.5*Math.random();
        this.alpha = 1;
        this.dead = false;
      }
      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vx *= .97;
        this.vy += .13;
        this.vy *= .98;
        this.radius *= .97;
        this.life -= 1;
        this.alpha = this.life/60;
        if(this.life<=0 || this.radius<=.35) this.dead = true;
      }
      draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, 2*Math.PI);
        ctx.fillStyle = this.color;
        ctx.shadowBlur = 20;
        ctx.shadowColor = this.color;
        ctx.fill();
        ctx.globalAlpha = 1;
        ctx.restore();
      }
    }
    let explodingParticles = [];
    function triggerExplosion(x, y){
      let colorBase = 270 + Math.random()*50;
      for(let i=0;i<36;i++){
        let angle = 2*Math.PI*i/36;
        let speed = Math.random() * 5.5 + 2.2;
        let color = `hsl(${colorBase + Math.random()*20},98%,65%)`;
        explodingParticles.push(new ExplodeParticle(x, y, angle, speed, color));
      }
    }
    
    // 全屏爱心特效函数
    function showFullscreenHeart() {
      const fullscreenHeart = document.getElementById('fullscreenHeart');
      fullscreenHeart.classList.add('active');
      
      // 2秒后隐藏全屏爱心
      setTimeout(() => {
        fullscreenHeart.classList.remove('active');
      }, 2000);
    }
    
    // 点击事件处理
    function handleClick(x, y) {
      triggerExplosion(x, y);
      showTip(x, y);
      showFullscreenHeart();
      audioSwitch();
    }
    
    particleCanvas.addEventListener('click', ev => {
      let x = ev.clientX, y=ev.clientY;
      handleClick(x, y);
    });
    
    particleCanvas.addEventListener('touchstart', ev => {
      if(ev.touches.length>=1){
        let x = ev.touches[0].clientX, y = ev.touches[0].clientY;
        handleClick(x, y);
      }
    },{passive:true});
    
    function showTip(x, y){
      let tip = document.getElementById('tip');
      tip.innerText = "💘一直在想你💘"
      tip.style.left = x + 'px';
      tip.style.top = y + 'px';
      tip.classList.add('show');
      setTimeout(()=>tip.classList.remove('show'), 1020);
    }

    drawParticles();

    // == 恋爱时长倒计时 ==
    function updateLoveTime() {
      const st = new Date("2025-10-18T13:28:07").getTime();
      let now = Date.now();
      let s = Math.floor((now-st)/1000);
      let days = Math.floor(s/86400); s %= 86400;
      let hours = Math.floor(s/3600); s %=3600;
      let minutes = Math.floor(s/60);
      let seconds = s%60;
      document.getElementById('loveTime').textContent =
        `想你了 ${days} 天 ${hours} 小时 ${minutes} 分钟 ${seconds} 秒`;
    }
    setInterval(updateLoveTime,1000);
    updateLoveTime();

    // == 提示引导首次交互（移动端）==
    setTimeout(()=>{
      let tip = document.getElementById('tip');
      tip.innerText = "老婆😋，点一点屏幕";
      tip.style.left = "50%";
      tip.style.top = "85%";
      tip.classList.add('show');
      setTimeout(()=>tip.classList.remove('show'), 3800);
    },2200);

    // 音频控制函数
    function audioSwitch() {
      // 这里可以添加音频控制逻辑
    }

  </script>
</body>
</html>
